<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>智能股票分析工具 - GitHub部署版</title>
    <script src="https://cdn.jsdelivr.net/npm/echarts@5.4.3/dist/echarts.min.js"></script>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>智能股票分析工具</h1>
            <p>GitHub部署版 - 集成yfinance和AkShare API</p>
        </div>
        
        <div class="agent-container">
            <div class="chat-panel">
                <div class="chat-header">
                    <h3>智能分析助手</h3>
                </div>
                <div class="chat-messages" id="chatMessages">
                    <div class="message agent-message">
                        您好！我是智能股票分析助手，可以帮您分析股票数据、计算技术指标并提供投资建议。
                    </div>
                </div>
                <div class="suggestion-chips">
                    <div class="chip" onclick="suggestionAction('AAPL')">分析 AAPL</div>
                    <div class="chip" onclick="suggestionAction('000001')">分析 000001</div>
                    <div class="chip" onclick="suggestionAction('TSLA')">分析 TSLA</div>
                    <div class="chip" onclick="suggestionAction('600519')">分析 600519</div>
                </div>
                <div class="chat-input">
                    <input type="text" id="userInput" placeholder="输入股票代码或问题...">
                    <button onclick="sendMessage()">发送</button>
                </div>
            </div>
            
            <div class="analysis-panel">
                <div class="controls">
                    <div class="control-group">
                        <label for="dataSource">数据源</label>
                        <select id="dataSource">
                            <option value="yfinance">yfinance (国际股票)</option>
                            <option value="akshare">AkShare (A股数据)</option>
                        </select>
                    </div>
                    
                    <div class="control-group">
                        <label for="modelType">分析模型</label>
                        <select id="modelType">
                            <option value="technical">技术指标</option>
                            <option value="arima">ARIMA预测</option>
                            <option value="svm">SVM分类</option>
                            <option value="lstm">LSTM预测</option>
                        </select>
                    </div>
                    
                    <div class="control-group">
                        <label for="timeRange">时间范围</label>
                        <select id="timeRange">
                            <option value="1d">1日</option>
                            <option value="5d">5日</option>
                            <option value="1mo">1月</option>
                            <option value="3mo" selected>3月</option>
                            <option value="6mo">6月</option>
                            <option value="1y">1年</option>
                        </select>
                    </div>
                    
                    <div class="control-group">
                        <label for="stockCode">股票代码</label>
                        <input type="text" id="stockCode" placeholder="如: AAPL, 000001" value="AAPL">
                    </div>
                    
                    <button onclick="loadStockData()">分析股票</button>
                </div>
                
                <div id="apiStatus"></div>
                
                <div class="chart-container">
                    <div class="loading" id="loading">
                        <div class="spinner"></div>
                        <div>加载数据中...</div>
                    </div>
                    <div id="stockChart"></div>
                </div>
                
                <div class="data-panel">
                    <div class="panel-section">
                        <h3>实时行情</h3>
                        <div class="data-item">
                            <span>股票代码:</span>
                            <span id="symbol">-</span>
                        </div>
                        <div class="data-item">
                            <span>最新价:</span>
                            <span id="currentPrice">-</span>
                        </div>
                        <div class="data-item">
                            <span>涨跌幅:</span>
                            <span id="changePercent">-</span>
                        </div>
                        <div class="data-item">
                            <span>开盘价:</span>
                            <span id="openPrice">-</span>
                        </div>
                        <div class="data-item">
                            <span>最高价:</span>
                            <span id="highPrice">-</span>
                        </div>
                        <div class="data-item">
                            <span>最低价:</span>
                            <span id="lowPrice">-</span>
                        </div>
                        <div class="data-item">
                            <span>成交量:</span>
                            <span id="volume">-</span>
                        </div>
                    </div>
                    
                    <div class="panel-section">
                        <h3>技术指标</h3>
                        <div class="data-item">
                            <span>MA5:</span>
                            <span id="ma5">-</span>
                        </div>
                        <div class="data-item">
                            <span>MA10:</span>
                            <span id="ma10">-</span>
                        </div>
                        <div class="data-item">
                            <span>MA20:</span>
                            <span id="ma20">-</span>
                        </div>
                        <div class="data-item">
                            <span>RSI (14):</span>
                            <span id="rsi">-</span>
                        </div>
                        <div class="data-item">
                            <span>波动率:</span>
                            <span id="volatility">-</span>
                        </div>
                    </div>
                    
                    <div class="panel-section">
                        <h3>AI分析建议</h3>
                        <div class="data-item">
                            <span>趋势判断:</span>
                            <span id="trend">-</span>
                        </div>
                        <div class="data-item">
                            <span>风险等级:</span>
                            <span id="risk">-</span>
                        </div>
                        <div class="data-item">
                            <span>建议操作:</span>
                            <span id="action">-</span>
                        </div>
                        <div class="data-item">
                            <span>置信度:</span>
                            <span id="confidence">-</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="footer">
            <p>© 2024 智能股票分析工具 | 数据仅供参考，投资有风险</p>
            <p>最后更新: <span id="updateTime">-</span></p>
            <p>部署平台: GitHub Pages + Heroku</p>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>
